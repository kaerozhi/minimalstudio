---
import { getEntry, getCollection } from 'astro:content';
import MarkdownDesignLayout from '@/layouts/MarkdownDesignLayout.astro';

export const prerender = true;

const collection = 'design'; // ðŸ”§ å›ºå®šä¸º 'design'

export async function getStaticPaths() {  
  const collection = 'design';
  const entries = await getCollection(collection);

  return entries.map((entry) => ({
    params: {
      slug: entry.slug,
    },
    props: {
      slug: entry.slug,
    },
  }));
}

const { slug } = Astro.props;

const entry = await getEntry(collection, slug);
if (!entry) throw new Error(`æœªæ‰¾åˆ° ${collection}/${slug}`);

const toc = entry?.data.toc;
const { Content, headings } = await entry.render();
---

<MarkdownDesignLayout entry={entry} collection={collection} toc={toc} headings={headings}>
  <Content />
</MarkdownDesignLayout>